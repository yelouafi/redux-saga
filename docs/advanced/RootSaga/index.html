<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Redux-Saga Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Redux-Saga Blog Atom Feed"><title data-react-helmet="true">Root Saga | Redux-Saga</title><meta data-react-helmet="true" property="og:image" content="https://redux-saga.js.org//img/Redux-Saga-Logo-Portrait.png"><meta data-react-helmet="true" name="twitter:image" content="https://redux-saga.js.org//img/Redux-Saga-Logo-Portrait.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Redux-Saga"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Root Saga | Redux-Saga"><meta data-react-helmet="true" name="description" content="Root Saga Patterns"><meta data-react-helmet="true" property="og:description" content="Root Saga Patterns"><meta data-react-helmet="true" property="og:url" content="https://redux-saga.js.org//docs/advanced/RootSaga"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://redux-saga.js.org//docs/advanced/RootSaga"><link rel="stylesheet" href="/styles.1ff216e0.css">
<link rel="stylesheet" href="/main.d9a8fb9f.css">
<link rel="preload" href="/styles.1c0a7872.js" as="script">
<link rel="preload" href="/runtime~main.888f4a22.js" as="script">
<link rel="preload" href="/main.dda7169f.js" as="script">
<link rel="preload" href="/1.72612929.js" as="script">
<link rel="preload" href="/34.30532b93.js" as="script">
<link rel="preload" href="/35.abdc7976.js" as="script">
<link rel="preload" href="/935f2afb.804f3d35.js" as="script">
<link rel="preload" href="/33.45da8d43.js" as="script">
<link rel="preload" href="/fc0e1d8e.4a0e97f0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/Redux-Saga-Logo.png" alt="Redux-Saga Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/Redux-Saga-Logo.png" alt="Redux-Saga Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Redux-Saga</strong></a><a class="navbar__item navbar__link" href="/docs/introduction/GettingStarted">Introduction</a><a class="navbar__item navbar__link" href="/docs/basics/DeclarativeEffects">Basics</a><a class="navbar__item navbar__link" href="/docs/advanced/Channels">Advanced</a><a class="navbar__item navbar__link" href="/docs/api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/redux-saga/redux-saga" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://www.npmjs.com/package/redux-saga" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">npm</a><a href="https://cdnjs.com/libraries/redux-saga" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">cdnjs</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/Redux-Saga-Logo.png" alt="Redux-Saga Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/Redux-Saga-Logo.png" alt="Redux-Saga Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Redux-Saga</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/GettingStarted">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/basics/DeclarativeEffects">Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/advanced/Channels">Advanced</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/api">API</a></li><li class="menu__list-item"><a href="https://github.com/redux-saga/redux-saga" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/redux-saga" target="_blank" rel="noopener noreferrer" class="menu__link">npm</a></li><li class="menu__list-item"><a href="https://cdnjs.com/libraries/redux-saga" target="_blank" rel="noopener noreferrer" class="menu__link">cdnjs</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/About">About</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/GettingStarted">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/BeginnerTutorial">Beginner Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/SagaBackground">Saga Background</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Basics Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/basics/DeclarativeEffects">Declarative Effects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/basics/DispatchingActions">Dispatching Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/basics/Effect">Effect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/basics/ErrorHandling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/basics/UsingSagaHelpers">Using Saga Helpers</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Advanced Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/Channels">Channels</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/ComposingSagas">Composing Sagas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/Concurrency">Concurrency</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/ForkModel">Fork Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/FutureActions">Future Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/NonBlockingCalls">Non-Blocking Calls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/RacingEffects">Racing Effects</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/advanced/RootSaga">Root Saga</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/RunningTasksInParallel">Running Tasks In Parallel</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/TaskCancellation">Task Cancellation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/Testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/UsingRunSaga">Using Run Saga</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/recipes">Recipes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ExternalResources">External Resources</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Troubleshooting">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Glossary">Glossary</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/api">API Reference</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="root-saga-patterns"></a>Root Saga Patterns<a class="hash-link" href="#root-saga-patterns" title="Direct link to heading">#</a></h1><p>A root Saga aggregates multiple Sagas to a single entry point for the sagaMiddleware to run.</p><p>In the <a href="/docs/introduction/BeginnerTutorial">beginner tutorial</a>, it is shown that your root saga will look something like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword module" style="color:#e3116c">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#e3116c">default</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">function</span><span class="token operator" style="color:rgb(0, 92, 197)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">rootSaga</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">all</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">helloSaga</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">watchIncrementAsync</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// code after all-effect</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This is one of a few ways to implement your root. Here, the <code>all</code> effect is used with an array and your sagas will be executed in parallel. Other root implementations may help you better handle errors and more complex data flow.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="non-blocking-fork-effects"></a>Non-blocking fork effects<a class="hash-link" href="#non-blocking-fork-effects" title="Direct link to heading">#</a></h2><p>Contributor @slorber mentioned in <a href="https://github.com/redux-saga/redux-saga/issues/760" target="_blank" rel="noopener noreferrer">issue#760</a> several other common root implementations. To start, there is one popular implementation that behaves similarly to the tutorial root saga behavior:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword module" style="color:#e3116c">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#e3116c">default</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">function</span><span class="token operator" style="color:rgb(0, 92, 197)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">rootSaga</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">fork</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">fork</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">fork</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// code after fork-effect</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Using three unique <code>yield fork</code> will give back a task descriptor three times. The resulting behavior in your app is that all of your sub-sagas are started and executed in the same order. Since <code>fork</code> is non-blocking, the <code>rootSaga</code> can finish while the child sagas continue to run and be blocked by their internal effects.</p><p>The difference between one big all effect and several fork effects is that the <code>all</code> effect is blocking, so <em>code after all-effect</em> (see comments in above code) is executed when all children sagas complete, while <code>fork</code> effects are non-blocking so <em>code after fork-effect</em> is executed immediately after yielding the fork effects. Another difference is that you can get task descriptors when using fork effects, so in the subsequent code you can cancel/join the forked task via task descriptors.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="nesting-fork-effects-in-all-effect"></a>Nesting fork effects in all effect<a class="hash-link" href="#nesting-fork-effects-in-all-effect" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">task1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> task2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> task3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">all</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">fork</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">fork</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">fork</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>There is another popular pattern when designing root saga: nesting <code>fork</code> effects in an <code>all</code> effect. By doing so, you can get an array of task descriptors, and the code after the <code>all</code> effect will be executed immediately because each <code>fork</code> effect is non-blocking and synchronously returning a task descriptor.</p><p>Note that though <code>fork</code> effects are nested in an <code>all</code> effect, they are always connected to the parent task through the underlying forkQueue. Uncaught errors from forked tasks bubble to the parent task and thus abort it (and all its child tasks) - they cannot be caught by the parent task.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="avoid-nesting-fork-effects-in-race-effect"></a>Avoid nesting fork effects in race effect<a class="hash-link" href="#avoid-nesting-fork-effects-in-race-effect" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token comment" style="color:rgb(106, 153, 85)">// DO NOT DO THIS. The fork effect always wins the race immediately.</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">race</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">fork</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">someSaga</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">take</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&#x27;SOME-ACTION&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  somePromise</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>On the other hand, <code>fork</code> effects in a <code>race</code> effect is most likely a bug. In the above code, since <code>fork</code> effects are non-blocking, they will always win the race immediately.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="keeping-the-root-alive"></a>Keeping the root alive<a class="hash-link" href="#keeping-the-root-alive" title="Direct link to heading">#</a></h2><p>In practice, these implementations aren&#x27;t terribly practical because your <code>rootSaga</code> will terminate on the first error in any individual child effect or saga and crash your whole app! Ajax requests in particular would put your app at the mercy of the status of any endpoints your app makes requests to.</p><p><code>spawn</code> is an effect that will <em>disconnect</em> your child saga from its parent, allowing it to fail without crashing its parent. Obviously, this does not relieve us from our responsibility as developers to still handle errors as they arise. In fact, it&#x27;s possible that this might obscure certain failures from the developer&#x27;s viewpoint and cause problems further down the road.</p><p>The <a href="/docs/api#spawnfn-args"><code>spawn</code></a> effect might be considered similar to <a href="https://reactjs.org/docs/error-boundaries.html" target="_blank" rel="noopener noreferrer">Error Boundaries</a> in React in that it can be used as an extra safety measure at some level of the saga tree, cutting off the failing feature and not letting the whole app crash. The difference is that there is no special syntax like the <code>componentDidCatch</code> that exists for React Error Boundaries. You must still write your own error handling and recovery code.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword module" style="color:#e3116c">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#e3116c">default</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">function</span><span class="token operator" style="color:rgb(0, 92, 197)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">rootSaga</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">spawn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">spawn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">spawn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In this implementation, even if one saga were to fail, the <code>rootSaga</code> and other sagas will not be killed. However, this can also be problematic since the failing saga would be unavailable for the app&#x27;s lifetime.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="keeping-everything-alive"></a>Keeping everything alive<a class="hash-link" href="#keeping-everything-alive" title="Direct link to heading">#</a></h2><p>In some cases, it may be desirable for your sagas to be able to restart in the event of failure. The benefit is that your app and sagas may continue to work after failing, i.e. a saga that <code>yield takeEvery(myActionType)</code>. But we do not recommend this as a blanket solution to keep all sagas alive. It is very likely that it makes more sense to let your saga fail in sanely and predictably and handle/log your error.</p><p>For example, @ajwhite offered this scenario as a case where keeping your saga alive would cause more problems than it solves:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token operator" style="color:rgb(0, 92, 197)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">sagaThatMayCrash</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// wait for something that happens _during app startup_</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">take</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&#x27;APP_INITIALIZED&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// assume it dies here</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">call</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">doSomethingThatMayCrash</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><blockquote><p>If the sagaThatMayCrash is restarted, it will restart and wait for an action that only happens once when the application starts up. In this scenario, it restarts, but it never recovers.</p></blockquote><p>But for the specific situations that would benefit from starting, user @granmoe proposed an implementation like this in <a href="https://github.com/redux-saga/redux-saga/issues/570" target="_blank" rel="noopener noreferrer">issue#570</a>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token operator" style="color:rgb(0, 92, 197)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">rootSaga</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> sagas </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    saga1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    saga2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    saga3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">all</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">sagas</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">map</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">saga</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">spawn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token keyword" style="color:#e3116c">function</span><span class="token operator" style="color:rgb(0, 92, 197)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#e3116c">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token boolean" style="color:rgb(0, 92, 197)">true</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#e3116c">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#e3116c">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">call</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">saga</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#e3116c">break</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#e3116c">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">          </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This strategy maps our child sagas to spawned generators (detaching them from the root parent) which start our sagas as subtasks in a <code>try</code> block. Our saga will run until termination, and then be automatically restarted. The <code>catch</code> block harmlessly handles any error that may have been thrown by, and terminated, our saga.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/redux-saga/redux-saga/edit/master/docs/../docs/advanced/RootSaga.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/advanced/RacingEffects"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Racing Effects</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/advanced/RunningTasksInParallel"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Running Tasks In Parallel Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#non-blocking-fork-effects" class="table-of-contents__link">Non-blocking fork effects</a></li><li><a href="#nesting-fork-effects-in-all-effect" class="table-of-contents__link">Nesting fork effects in all effect</a></li><li><a href="#avoid-nesting-fork-effects-in-race-effect" class="table-of-contents__link">Avoid nesting fork effects in race effect</a></li><li><a href="#keeping-the-root-alive" class="table-of-contents__link">Keeping the root alive</a></li><li><a href="#keeping-everything-alive" class="table-of-contents__link">Keeping everything alive</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/introduction/BeginnerTutorial">Introduction</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/basics/DeclarativeEffects">Basic Concepts</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/advanced/Channels">Advanced Concepts</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/api">API Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Resources</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/Glossary">Glossary</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/Troubleshooting">Troubleshooting</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/ExternalResources">External Resources</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Sources</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/redux-saga/redux-saga" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://www.npmjs.com/package/redux-saga" target="_blank" rel="noopener noreferrer" class="footer__link-item">npm</a></li><li class="footer__item"><a href="https://cdnjs.com/libraries/redux-saga" target="_blank" rel="noopener noreferrer" class="footer__link-item">cdnjs</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Redux-Saga Logo" src="/img/Redux-Saga-Logo-Landscape.png"></div><div class="footer__copyright">Copyright Â© 2021 Redux-Saga. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.1c0a7872.js"></script>
<script src="/runtime~main.888f4a22.js"></script>
<script src="/main.dda7169f.js"></script>
<script src="/1.72612929.js"></script>
<script src="/34.30532b93.js"></script>
<script src="/35.abdc7976.js"></script>
<script src="/935f2afb.804f3d35.js"></script>
<script src="/33.45da8d43.js"></script>
<script src="/fc0e1d8e.4a0e97f0.js"></script>
</body>
</html>